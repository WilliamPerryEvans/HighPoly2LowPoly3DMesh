# HighPoly2LowPoly3DMesh
## Converting High-Poly Meshes to Low-Poly (unedited version üö®)

The following is a guide on how to get a messy, high-poly, photogrammetry Meshroom model into a clean, but detailed low-poly, game-ready asset for Blender. I have simply written up the instructions from [Blender Bones on YouTube](https://www.youtube.com/watch?v=-dc4KN2bdrw).

The process is straightforward: Compile the model in Meshroom ‚û°Ô∏è import and straighten up in Blender ‚û°Ô∏è export it into Instant Mesh ‚û°Ô∏èimport the low-poly version into Blender ‚û°Ô∏è repair the low-poly version ‚û°Ô∏è unwrap the low-poly version ‚û°Ô∏èthen bake the textures and normal from the high to the low-poly version!

1.	To begin, make sure you have [Meshroom](https://alicevision.org/), [Instant Mesh](https://github.com/wjakob/instant-meshes), and [Blender](blender.org/download/) installed. [Meshlab](https://www.meshlab.net/) optional.
2.	(If you already have a mesh, just skip to Step 5.) Compile the model in Meshroom. After finished processing, import the OBJ model into Blender. Go to File > Import >Wavefront OBJ, then navigate to where you saved your Meshroom project. Go to Meshroom Cache > Texturing  and import texturedMesh.obj.
3.	The model is now in Blender, but you need to straighten it. Click Num 3 on the number pad for Right View; now press R and use your mouse to rotate your model until it is squared up. Click Num 1 for Front View and rotate your model again until it is sitting flat. Click Num 7 for Top View and rotate again if needed. Repeat, using G to grab and reposition your object.
4.	Now take a look at your model in wireframe view; as you will see, the mesh is a mess, there are sometimes holes and a mixture of large and small faces. Let‚Äôs keep things organized. Rename your object and type in ‚ÄòHi Res‚Äô. Next ensure that we have the model selected, then go to File > Export > Wavefront OBJ. Note: Make sure you have Limit to: Selection Only checked on the right panel. Export your OBJ model.
5.	Personally, I like cleaning up meshes first in Meshlab, especially if there is stray imagery. The simplest way I have found to do this is going to Filters > Cleaning and Repairing > Remove isolated pieces (wrt diameter); it will give you a recommended option, try this and see how it looks. You may have to do a bit of trial and error, and unfortunately there is no undo button in Meshlab so you‚Äôll have to start from a previous save. 
6.	Now load up Instant Mesh and import your OBJ model! This is easy, just click Open Mesh in the top lefthand corner and navigate to the Hi Res OBJ you just saved. Reset Target Vertex Count down to 2 K. Note: It can be anything between 2.0 K and 2.9 K. You can also use the Orientation Comb to cause the mesh to curve around your object. 
7.	Now click on Solve beneath Position Field. Now click Export Mesh. Under Mesh Setting check Pure quad mesh with smoothing iterations of 1, then click Extract Mesh. Then save your model; you can re-name this as ‚ÄúLow Res‚Äù. 

--- 

9.	Import your low res OBJ back into Blender and again rename it to Low Res. For now you can also hide the high res version by clicking the eye icon next to it. Go into (Solid) Viewport Shading and press the Tab key to take you into Edit mode. With Edge Select selected, ensure that all of the mesh is selected by pressing the A key until all of the mesh turns orange. (There may be some troubleshooting necessary if you cannot select the object; check under the Outliner to see if the object is even selectable). Now right click and select Clear Sharp. 
10.	Now tab out of Edit mode, right click, and choose Shade Smooth. 
11.	Optional: Go back to your low-res mesh and (in edit mode) remove any parts of the model that you don‚Äôt wish to use. Don‚Äôt change its shape, scale, or add to the mesh just yet (we can do that at the end of this process). 
12.	Next, we need to unwrap the mesh, ready for texturing. To do this, we need to mark seams for an optimized unwrapping. Mark your seams mostly in areas that are not easily seen. Some seams will have to be in prominent areas. Tab into Edit mode, and using the Edge Select, select where you want your seams to go and then right click and choose Mark Seams. 
13.	Now in Face Select mode, select A to select all, and then U to unwrap. Now click on the UV Editing tab at the top, to see the unwrapped UVs. 
14.	We now need to generate a texture for our low-res model. Tabbing out of Edit Mode, you can see in the Material Preview, the hi-res has texture, but the low-res does not. With the low-res model selected, click on the material property, to ensure that the shader is already in place for this model. 
15.	At the top go to the Shading tab, and click on the shading editor screen, and hold down the Shift key and press A and then S and type in ‚Äòimage‚Äô. Select Image Texture and hit return and click to drop it here. Click New and type in 1024 for 1k, 2048 for 2k, or 4096 for 4k. Click Ok and connect your image texture to the base color. Your model should now look black as there is no texture currently in place. 
16.	Make sure your image texture box is currently selected, now enable your high-res model. Select your high-res mesh first and then holding down the Ctrl key select your low-res mesh. Now both are selected and you must do it in this order. 
17.	Open the Render properties and select Cycles as your render engine. Under Sampling, reduce your render to 8. Under Light Paths, maximum bounce total should be 2. Under Light Paths caustics, switch off reflective and refractive. Under Performance, tiles, select an X and Y tile that is the same as your image texture size (i.e. 1024). Now go down to Bake and check Selected to Active with an extrusion of .1. We are going to bake the image texture first, so under Bake Type select Diffuse and then under Contributions uncheck Direct and Indirect. Now click Bake!
18.	Ok, after that is done, make sure it is saved by going to the three horizontal bars next to View in the lower righthand corner and saving it somewhere. 
19.	Click anywhere in the shader editor and press shift A S and type in ‚Äòimage‚Äô. Select the image texture node, new, and ensure it has the same dimensions as the diffuse	 texture. Click on ok.
20.	With the new image texture node selected, change your bake type to normal, and click bake! As before, save your new image texture (call it normal, for example). 
21.	Now go to shader editor and press shift A S and type normal to find a normal map. Put it between your normal image texture and your principle shader, connect the color of your image texture to the color of your normal map mode, and the normal to the normal. Ensure that your image texture has a color space of non-color. Now hide the hi-res model. 
22.	Annnnnd it didn‚Äôt work! Need to go back and see what I did wrong!!
